<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smeta AI - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–º–µ—Ç</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
        <div id="login-screen" class="screen active">
            <div class="container">
                <div class="login-box">
                    <h1 class="logo">Smeta AI</h1>
                    <p class="subtitle">–í–µ–±-—Å–µ—Ä–≤–∏—Å –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–º–µ—Ç –∏ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤</p>
                    
                    <form id="login-form" class="form">
                        <div class="form-group">
                            <input 
                                type="password" 
                                id="password" 
                                placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" 
                                required
                                class="form-input"
                            >
                        </div>
                        <button type="submit" class="btn btn-primary btn-block">–í—Ö–æ–¥</button>
                    </form>
                    
                    <div id="login-error" class="error-message" style="display: none;"></div>
                </div>
            </div>
        </div>

        <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="main-screen" class="screen">
            <nav class="navbar">
                <div class="container">
                    <h1 class="logo-main">Smeta AI</h1>
                    <div class="nav-right">
                        <span id="user-type" class="user-type"></span>
                        <button id="logout-btn" class="btn btn-secondary btn-small">–í—ã—Ö–æ–¥</button>
                        <a href="#admin-panel" id="admin-link" style="display: none;" class="btn btn-warning btn-small">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
                    </div>
                </div>
            </nav>

            <div class="container main-content">
                <div class="grid-2">
                    <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å - —Ñ–æ—Ä–º–∞ -->
                    <div>
                        <div class="card">
                            <h2>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h2>
                            
                            <!-- Drag and drop —Ñ–∞–π–ª–æ–≤ -->
                            <div class="file-upload-area" id="file-upload-area">
                                <div class="file-upload-content">
                                    <div class="upload-icon">üìÅ</div>
                                    <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</p>
                                    <p class="text-small">PDF, Excel, XML, GSN</p>
                                </div>
                                <input 
                                    type="file" 
                                    id="file-input" 
                                    multiple 
                                    accept=".pdf,.xlsx,.xls,.xml,.gsn"
                                    style="display: none;"
                                >
                            </div>

                            <!-- –°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ -->
                            <div id="file-list" class="file-list" style="display: none;">
                                <h4>–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:</h4>
                                <ul id="files-ul"></ul>
                                <button type="button" id="clear-files" class="btn btn-small btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å</button>
                            </div>
                        </div>

                        <div class="card">
                            <h2>–¢–∏–ø –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</h2>
                            
                            <form id="input-type-form">
                                <div class="radio-group">
                                    <label class="radio-label">
                                        <input type="radio" name="input_type" value="–¢–ó" required>
                                        <span>–¢–ó</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="input_type" value="–¢–ó + –ü—Ä–æ–µ–∫—Ç">
                                        <span>–¢–ó + –ü—Ä–æ–µ–∫—Ç</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="input_type" value="–°–º–µ—Ç–∞ –ì—Ä–∞–Ω–¥–°–º–µ—Ç–∞ + –ü—Ä–æ–µ–∫—Ç">
                                        <span>–°–º–µ—Ç–∞ –ì—Ä–∞–Ω–¥–°–º–µ—Ç–∞ + –ü—Ä–æ–µ–∫—Ç</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="input_type" value="–ü—Ä–æ–µ–∫—Ç —Å–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π">
                                        <span>–ü—Ä–æ–µ–∫—Ç —Å–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="input_type" value="–°–º–µ—Ç–∞ –≠–î–¶ + –ü—Ä–æ–µ–∫—Ç">
                                        <span>–°–º–µ—Ç–∞ –≠–î–¶ + –ü—Ä–æ–µ–∫—Ç</span>
                                    </label>
                                    <label class="radio-label">
                                        <input type="radio" name="input_type" value="–ì–æ—Ç–æ–≤—ã–π –ü–µ—Ä–µ—á–µ–Ω—å (XLSX)">
                                        <span>–ì–æ—Ç–æ–≤—ã–π –ü–µ—Ä–µ—á–µ–Ω—å (XLSX)</span>
                                    </label>
                                </div>
                            </form>
                        </div>

                        <div class="card">
                            <h2>–í—ã–±–æ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞</h2>
                            
                            <form id="output-type-form">
                                <div class="checkbox-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="requested_outputs" value="list">
                                        <span>–ü–µ—Ä–µ—á–µ–Ω—å —Ä–∞–±–æ—Ç –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="requested_outputs" value="estimate">
                                        <span>–°–º–µ—Ç–∞</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="requested_outputs" value="comparison">
                                        <span>–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑</span>
                                    </label>
                                </div>
                            </form>
                        </div>

                        <div class="card">
                            <h2>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</h2>
                            <textarea 
                                id="user-comment" 
                                class="form-input" 
                                placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"
                                rows="4"
                            ></textarea>
                        </div>

                        <button id="process-btn" class="btn btn-primary btn-block btn-large">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>

                    <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –∏—Å—Ç–æ—Ä–∏—è -->
                    <div>
                        <div class="card">
                            <h2>–°—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏</h2>
                            <div id="progress-container" style="display: none;">
                                <div class="progress-bar">
                                    <div id="progress-fill" class="progress-fill"></div>
                                </div>
                                <ul class="progress-steps">
                                    <li class="step" id="step-1">
                                        <span class="step-number">1</span>
                                        <span class="step-text">–ê–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</span>
                                    </li>
                                    <li class="step" id="step-2">
                                        <span class="step-number">2</span>
                                        <span class="step-text">–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ—á–Ω—è</span>
                                    </li>
                                    <li class="step" id="step-3">
                                        <span class="step-number">3</span>
                                        <span class="step-text">–†–∞—Å—á–µ—Ç —Å–º–µ—Ç—ã</span>
                                    </li>
                                    <li class="step" id="step-4">
                                        <span class="step-number">4</span>
                                        <span class="step-text">–ì–æ—Ç–æ–≤–æ</span>
                                    </li>
                                </ul>
                            </div>
                            <div id="status-message" class="status-message"></div>
                        </div>

                        <div class="card">
                            <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
                            <div id="results-container" style="display: none;">
                                <ul id="results-list" class="results-list"></ul>
                            </div>
                            <div id="no-results" class="text-center text-gray">
                                –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
                            </div>
                        </div>

                        <div class="card">
                            <h2>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤</h2>
                            <div id="history-container">
                                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
        <div id="admin-screen" class="screen">
            <nav class="navbar">
                <div class="container">
                    <h1 class="logo-main">Smeta AI - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
                    <div class="nav-right">
                        <a href="#main" id="back-to-main" class="btn btn-secondary btn-small">–í–µ—Ä–Ω—É—Ç—å—Å—è</a>
                        <button id="admin-logout-btn" class="btn btn-secondary btn-small">–í—ã—Ö–æ–¥</button>
                    </div>
                </div>
            </nav>

            <div class="container">
                <div class="card">
                    <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="total-requests">-</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="successful-requests">-</div>
                            <div class="stat-label">–£—Å–ø–µ—à–Ω–æ</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="failed-requests">-</div>
                            <div class="stat-label">–û—à–∏–±–æ–∫</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="success-rate">-</div>
                            <div class="stat-label">% —É—Å–ø–µ—Ö–∞</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤</h2>
                    <div class="admin-controls">
                        <input type="date" id="filter-date-from" placeholder="–û—Ç" class="form-input">
                        <input type="date" id="filter-date-to" placeholder="–î–æ" class="form-input">
                        <button id="filter-btn" class="btn btn-primary">–§–∏–ª—å—Ç—Ä</button>
                        <button id="export-csv-btn" class="btn btn-success">–≠–∫—Å–ø–æ—Ä—Ç CSV</button>
                    </div>
                    <div id="admin-requests-table" class="table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–î–∞—Ç–∞</th>
                                    <th>–¢–∏–ø –≤—Ö–æ–¥–∞</th>
                                    <th>–§–∞–π–ª—ã</th>
                                    <th>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</th>
                                    <th>–°—Ç–∞—Ç—É—Å</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="admin-table-body">
                                <tr><td colspan="7" class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
